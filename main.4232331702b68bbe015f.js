(()=>{"use strict";var e={76:(e,t,n)=>{n.r(t)},198:(e,t,n)=>{n.r(t)},528:(e,t,n)=>{n.r(t)},667:(e,t,n)=>{n.r(t)},387:(e,t,n)=>{n.r(t)},752:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{a(i.next(e))}catch(e){o(e)}}function d(e){try{a(i.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,d)}a((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const s=n(229),o=n(366),r=n(53),d=n(967),a=n(610);t.App=class{constructor(e){this.rootElement=e,this.header=new o.Header,this.game=new s.Game,this.timer=new a.Timer,this.register=new d.Register,this.rootElement.appendChild(this.header.element),this.rootElement.appendChild(this.game.element),this.game.element.classList.add("main"),this.popup=new r.Popup(document.body)}start(){return i(this,void 0,void 0,(function*(){const e=yield fetch("./images.json"),t=(yield e.json())[0],n=t.images.map((e=>`${t.category}/${e}`));this.game.newGame(n)}))}}},54:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.About=void 0;const i=n(583);class s extends i.BaseComponent{constructor(){super("div",["about"]),this.element.innerHTML="\n    <h1>How to play?</h1>\n    <div>Register new player in game</div>\n    <div>Configure your game settings</div>\n    <div>Start you new game! Remember card positions and match it before times up.</div>\n    "}}t.About=s},583:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponent=void 0,t.BaseComponent=class{constructor(e="div",t=[]){this.element=document.createElement(e),this.element.classList.add(...t)}}},977:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Card=void 0,n(76);const i=n(583);class s extends i.BaseComponent{constructor(e){super("div",["card-container"]),this.image=e,this.isFlipped=!1,this.element.innerHTML=`\n    <div class="card">\n      <div class="front" style="background-image: url('./images/${e}')"></div>\n      <div class="back"></div>\n    </div>\n    `}flipToBack(){return this.isFlipped=!0,this.flip(!0)}flipToFront(){return this.isFlipped=!1,this.flip()}flip(e=!1){return new Promise((t=>{this.element.classList.toggle("flipped",e),this.element.addEventListener("transitionend",(()=>t()),{once:!0})}))}}t.Card=s},791:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Field=void 0,n(198);const i=n(583);class s extends i.BaseComponent{constructor(){super("div",["field"]),this.cards=[]}clear(){this.cards=[],this.element.innerHTML=""}addCards(e){this.cards=e,this.cards.forEach((e=>this.element.appendChild(e.element))),setTimeout((()=>{this.cards.forEach((e=>e.flipToBack()))}),5e3)}}t.Field=s},229:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{a(i.next(e))}catch(e){o(e)}}function d(e){try{a(i.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,d)}a((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0;const s=n(680),o=n(583),r=n(977),d=n(791),a=n(610);class l extends o.BaseComponent{constructor(){super(),this.isAnimation=!1,this.field=new d.Field,this.timer=new a.Timer,this.element.appendChild(this.timer.element),this.element.appendChild(this.field.element)}newGame(e){this.field.clear();const t=e.concat(e).map((e=>new r.Card(e))).sort((()=>Math.random()-.5));t.forEach((e=>{e.element.addEventListener("click",(()=>this.cardHandler(e)))})),this.field.addCards(t),setTimeout((()=>{this.timer.startCounter()}),3e3)}cardHandler(e){return i(this,void 0,void 0,(function*(){if(!this.isAnimation&&e.isFlipped){if(this.isAnimation=!0,yield e.flipToFront(),!this.activeCard)return this.activeCard=e,void(this.isAnimation=!1);this.activeCard.image!==e.image&&(yield s.delay(3e3),yield Promise.all([this.activeCard.flipToBack(),e.flipToBack()])),this.activeCard=void 0,this.isAnimation=!1}}))}}t.Game=l},366:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0,n(528);const i=n(583),s=n(88),o=n(967),r=n(18);class d extends i.BaseComponent{constructor(){super("header",["header"]),this.about=new s.NavAbout("div","div"),this.register=new o.Register,this.logo=new r.Logo,this.element.appendChild(this.logo.element),this.element.appendChild(this.about.element),this.element.appendChild(this.register.element),this.register.showPopup()}}t.Header=d},18:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Logo=void 0;const i=n(583);class s extends i.BaseComponent{constructor(){super("div",["logo"])}}t.Logo=s},88:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NavAbout=void 0;const i=n(583);class s extends i.BaseComponent{constructor(e,t){super("nav",["menu"]),this.icon="",this.text="",this.icon=e,this.text=t,this.element.innerHTML='\n    <ul>\n    <li class ="nav-link"><a href="#/about">About Game</a></li>\n    <li class ="nav-link"><a href="#/score">Best Score</a></li>\n    <li class ="nav-link"><a href="#/settings">Game Settings</a></li>\n    </ul>\n    '}}t.NavAbout=s},967:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Register=void 0;const i=n(583);class s extends i.BaseComponent{constructor(){super("button",["register-btn"]),this.element.innerHTML="Register new player"}showPopup(){this.element.addEventListener("click",(()=>{document.querySelector(".popup").style.display="flex"}))}}t.Register=s},550:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Players=void 0;const i=n(583);class s extends i.BaseComponent{constructor(){super("div",["players"]),this.element.innerHTML="\n    <h1>Best Players</h1>\n    <div>1</div>\n    <div>2</div>\n    <div>3</div>\n    "}}t.Players=s},474:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Control=void 0,t.Control=class{constructor(e,t="div",n="",i=""){const s=document.createElement(t);s.className=n,s.textContent=i,e&&e.append(s),this.node=s}}},502:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Input=void 0;const i=n(474);class s extends i.Control{constructor(e){super(e,"div","form-wrapper"),this.caption=new i.Control(this.node,"div","popup-header"),this.field=new i.Control(this.node,"input","input"),this.error=new i.Control(this.node,"div","error"),this.field2=new i.Control(this.node,"input","input2"),this.field3=new i.Control(this.node,"input","input3"),this.saveButton=new i.Control(this.node,"button","add-user"),this.cancelButton=new i.Control(this.node,"button","cancel"),this.field.node.addEventListener("input",(()=>{this.onInput()})),this.cancelButton.node.addEventListener("click",(()=>{this.cancelPopup()})),this.caption.node.textContent="Register new Player",this.saveButton.node.textContent="Add User",this.cancelButton.node.textContent="Cancel",this.pop=document.querySelector(".popup")}onInput(){const e=document.querySelector(".input").value;e.length<5&&this.field.node.classList.add("error"),e.length>5&&(this.field.node.classList.remove("error"),this.field.node.classList.add("success"))}cancelPopup(){this.pop.style.display="none"}}t.Input=s},53:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Popup=void 0;const i=n(474),s=n(502);n(667);class o extends i.Control{constructor(e){super(e,"div","popup"),this.input=new s.Input(this.node)}}t.Popup=o},610:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=void 0;const i=n(583);class s extends i.BaseComponent{constructor(){super("div",["timer"]),this.element.innerHTML="00:00",this.seconds=0,this.minutes=0,this.hour=0,this.interval=null,this.status="stopped"}static startCounter(){throw new Error("Method not implemented.")}startCounter(){this.interval=setInterval((()=>{document.querySelector(".timer").innerHTML=`${this.minutes} min. ${this.seconds} sec.`,this.seconds++,60===this.seconds&&(this.minutes++,this.seconds=0),60===this.minutes&&(this.hour++,this.minutes=0)}),1e3)}}t.Timer=s},873:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.router=void 0;const i=n(54),s=n(550),o=new i.About,r=new s.Players,d={render:()=>"\n      <section>\n        <h1>Error</h1>\n        <p>This is just a test</p>\n      </section>\n    "},a=[{path:"/about",component:{render:()=>{document.querySelector(".main").appendChild(o.element)}}},{path:"/score",component:{render:()=>{document.querySelector(".main").appendChild(r.element)}}},{path:"/settings",component:{render:()=>{document.querySelector(".main").innerHTML="\n      <section>\n        <h1>Settings</h1>\n        <p>This is just a test</p>\n      </section>\n    "}}}];t.router=()=>{const e=window.location.hash.slice(1).toLowerCase()||"/",{component:t=d}=((e,t)=>t.find((t=>t.path.match(new RegExp(`^\\${e}$`,"gm"))))||void 0)(e,a)||{};document.querySelector(".main").innerHTML="",t.render()}},680:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise((t=>{setTimeout(t,e)}))}}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{n(387);const e=n(752),t=n(873);window.onload=()=>{const n=document.getElementById("body");if(!n)throw Error("There's no such element");new e.App(n).start(),window.addEventListener("hashchange",t.router),window.addEventListener("load",t.router)}})()})();